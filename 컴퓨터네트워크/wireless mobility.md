# Wireless & Mobility

[TOC]

와이어리스라는 말은 기기에 선 없이 네트워크 연결이 되는 것. 와이파이. 

모빌리티라는 말은 액세스 포인트가 바뀌는 것. 3G, LTE는 계속해서 기지국이 바뀔 수 있기 때문에 모빌리티, 하지만 와이파이는 그럴 수 없으니 모빌리티가 아니다.

## Wireless

802.11이 와이파이다. 

### Wireless network

|                | Single hop                | Multiple hops |
| -------------- | ------------------------- | ------------- |
| Infrastructure | 우리가 쓰는 건 거의 이거. |               |
| no infra       |                           |               |

 유선 링크의 경우, 케이블이 있고, 껍질로 둘러싸여 있다. 그래서 받을 때까지 데이터의 신호가 거의 줄지 않는다. 하지만 무선 네트워크는 외부의 영향을 많이 받는다. 공기라는 미디엄을 통해 가는 것이기 때문에 전송거리에 반비례하게 신호세기가 정해진다. 

 A에서 B에게 무언가 보내고 있는데, C도 B에게 보내고 있다. 유선이라면 CSMA/CD로 판단하면 되는데, A가 말하는 것은 C 입장에선 거의 안들리기 때문에 그냥 말한다. 그러면 충돌나는 것. 유선 상에서 썼던 CSMA/CD를 쓰기엔 무리가 있다. 이러한 문제를 Hidden terminal problem이라고 한다.

### IEEE 802.11 Wireless LAN

 802.11b부터 시작해서 802.11a, 802.11n 등 점점 빨라지고 있음. Wi(ireless)-Fi(ddility). 원래는 HiFi의 패러디이다. HiFi는 오디오 세계에서 실제 원음에 충실한 레코딩 방법이었다. 유선 속도만큼 가깝게 하겠다는 목표를 가지고 와이파이라고 부름.

#### Architecture

 AP(Access Point)에 연결 되어있고, 와이파이 호스트의 집합을 BSS라고 한다. 

#### Scanning

 유선 연결이 안되어 있으면 무선 연결을 확인해야 함. DHCP로 IP를 받기 위해서는 기본적으로 링크가 연결되어 있어야 함. 랩탑이 가장 처음에 하는 일은 내가 어떤 AP와 연결을 맺을지. 인터페이스 카드가 와이파이 채널을 스캐닝한다. 어떤 ap가 있는지. AP들이 주기적으로 자신을 브로드캐스팅한다. 그 중에 우리가 선택하면 해당하는 AP한테 연결하는 것. 그 이후에 DHCP와 통신하는 것이다.

#### Hidden Termianl Problem : Collision Avoidance

 무선에서는 거리가 Critical Factor이다. 멀리있으면 소리가 안들림. Collision Detection이 안된다. 그래서 Collision Avoidancd를 사용한다. 

 캐리어 센스했는데 아무도 이야기하지 않는다. 아무도 이야기하지 않는 것처럼 느껴지면 전체 프레임 다 보낸다. 이전에는 충돌감지하면 끊었는데, 여기선 그런 개념이 없다. 걍 다 보냄. 대신 ACK를 받는다. 링크 레이어임에도 불구하고 피드백이 있다. 이더넷의 경우는 갔는지 아닌지 확신할 수 있었다. 충돌만 아니면 무조건 도착한 것인데, 무선의 경우는 충돌이 아니더라도 데이터가 제대로 갔는지 확신할 수 없다. 유선에 비해 시간이 더 걸린다. 1) 한 번 보내면 멈추지 않고 다 보내기 때문에 2) ACK까지 받아야 하기 때문에. ACK를 받지 못했으면 재전송 해야 함. 그 말은 나 말고 다른 사람이 보내고 있다는 말이니까, 랜덤 벡터로 경쟁하다가 다시 보냄. 또 안오면 또 기다렸다가 또 보냄. 계속 그렇게 한다. 그렇게 하다가 연속 7번까지 ack를 받지 못하면 포기한다. 그러면 영원히 유실되는 건 아니다. 링크 레이어에선 끝난거지만 나중에 TCP에서 타이머 시간지나면 재전송 할 것.