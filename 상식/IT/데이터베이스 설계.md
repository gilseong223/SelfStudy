# 데이터베이스 설계

[TOC]

## 1. 데이터 모델링 주요 개념

 데이터 모델링은 정보화 시스템을 구축하기 위해 어떤 데이터가 존재하는지 또는 업무에 필요한 정보는 무엇인지 분석하는 작업이다.

### 엔티티타입

엔티티타입은 엔티티의 집합이다. 강사라는 개념이 있어야 박 강사, 이 강사가 존재할 수 있다. 이렇게 "강사"라는 개념을 만들어주는 것이 엔티티타입이다. 엔티티는 엔티티타입에 속한 박 강사, 이 강사가 된다. 즉 엔티티타입은 업무에 필요하고 유용한 정보를 저장/관리하기 위한 단위라고 볼 수 있다.

#### 특징

1. 업무에서 필요하고 관리해야하는 정보여야 한다.

2. 유일한 식별자에 의해 식별이 가능해야 한다.
3. 두 개 이상인 데이터가 존재해야 한다.
4. 업무 프로세스는 그 엔티티타입을 반드시 이용해야한다.
5. 반드시 속성이 포함되어야 한다.
6. 다른 엔티티타입과 최소 한 개 이상의 관계가 있어야 한다.

#### 엔티티타입 분류
- 유, 무형에 따라 : 유형 엔티티타입, 개념 엔티티타입, 사건 엔티티타입
- 발생시점에 따라 : 기본 엔티티타입, 중심 엔티티타입, 행위 엔티티타입

#### 엔티티타입 명명
- 가능하면 현업에서 사용하는 용어를 사용한다.
- 가능하면 약어를 사용하지 않는다.
- 단수 명사를 사용한다.
- 엔티티타입에 부여되는 이름은 유일해야 한다.
- 가급적 엔티티타입이 생성되는 의미에 따라 이름을 부여한다.

### 속성
 엔티티타입의 엔티티들에서 더 이상 분리되지 않는 최소의 데이터 단위를 속성이라고 한다. 각각의 엔티티타입은 속성의 집합으로 설명될 수 있다. 

#### 속성의 분류
 - 기본속성 : 업무로부터 추출한 모든 속성. 가장 일반적이고 많은 속성을 차지한다.
 - 설계속성. : 데이터모델링을 위해 규칙화하려고 새로 만들거나 변형한 속성. 일련번호같은거.
 - 파생 속성 : 다른 속성에 영향을 받아 발생하는 속성. 계산값이 이에 속한다. 

#### 속성의 명명
- 해당업무에서 사용하는 이름을 부여한다.
- 서술식으로 사용하지 않는다.
- 약어 사용은 자제한다.
- 엔티티타입에서 유일하게 식별 가능하도록 지정한다.

### 식별자
 여러 개의 집합체를 담고 있는 하나의 엔티티타입에서 각각의 엔티티를 구분할 수 있는 정보. 모든 엔티티에는 하나 이상의 식별자가 있어야 한다.

#### 식별자의 특징
- 식별자에 의해 엔티티들은 유일하게 구분될 수 있어야 한다.
- 일단 식별자가 지정되면 식별자는 변하면 안된다.
- 식별자가 지정되면 주식별자 속성에 반드시 데이터값이 있어야 한다.

#### 식별자의 분류
- 주식별자 / 보조 식별자
- 내부 식별자 / 외부 식별자
- 단일 식별자 / 복합 식별자
- 원조 식별자 / 대리 식별자

### 관계

 관계는 두 엔티티타입 사이의 논리적인 관계를 의미한다.  엔티티와 엔티티가 어떤 행위로 서로에게 영향을 주는지 정의한 것이라고 할 수 있다. 
#### 관계의 카디날리티
 두 개의 엔티티타입 관계에서 참여자의 수를 표현하는 것을 카디날리티라고 한다. 1:N, 1:1, N:M 등이 있다. 

#### 관계에 참여하는 방법
 필수참여(Mandatory Membership), 선택참여(Optional Membership)

#### 관계의 종류
- 정상관계 : 엔티티타입과 엔티티타입이 독립적으로 분리되어 있으면서 상호간에 한 가지 관계만 성립하는 형태이다.
- 자기 참조 관계 : 엔티티타입 내에서 엔티티와 엔티티가 관계를 맺는 형태. 계층 구조를 표현할 때 유용하다. 부품은 다른 부품으로 조립될 수도 있다. 컴퓨터는 본체, 마우스, 키보드로 구성되고, 본체는 메모리와 CPU로 구성되는 것이 그 예이다.
- 병렬관계 : 두 개 이상의 관계가 상호간에 존재하는 관계.
- 슈퍼타입 서브타입 관계 : 슈퍼타입과의 공통부분을 제외하고 두 개 이상
- 주식별자, 부식별자 관계(Identifying, Non-Identifying) : 부모타입의 주식별자가 자식타입의 주식별자가 되는 경우 주식별자 관계. 주식별자가 자식타입의 일반속성으로 상속되는 경우 부식별자 관계이다.

### 엔티티 슈퍼타입과 서브타입
 여러 엔티티타입이 비슷하고 일부만 다를 경우 여러 개의 엔티티타입을 한 개의 엔티티타입으로 묶어 통합하고 서브타입으로 나누어 표시하는 경우이다. 방문접수, 인터넷접수, 전화접수가 있을 때 접수라는 수퍼 타입이 존재할 수 있고 그 아래 인터넷접수, 방문접수 등을 둘 수 있다. 접수에는 공통 영역을 사용한다. 접수번호, 접수자명 등등.

### 서브젝트 에어리어
 업무가 복잡할때는 데이터 모델도 매우 크고 복잡해지는 경우가 있다. 시스템의 복잡도를 감소시키고 개발 범위를 분담하며, 편의성을 높이기 위해 서브젝트 에어리어를 이용하는 것이 좋다. 

#### 서브젝트 에어리어 구분
 시간흐름에 따른 업무 분류를 추천한다. 교육 시스템을 구축하는 프로젝트에서 언어 분야, 수학 분야, 물리 분야로 나누는 것(A)보다 수간싱청, 강의라는 서브젝트 에어리어로 나누는 것(B)이 더 좋을 것이다. A는 수강생, 수강신청, 과목 등 에어리어별로 겹치는 것이 많지만, B는 중복이 많지 않아 단순하고 구조적으로 만들 수 있다. 
 항상 시간별로 나누는 것이 좋은 것은 아니다. 업무간 상관관계가 크지 않은 엔티티타입을 한 에어리어에 두는 것은 오히려 비효율적이 될 것이다.

#### 서브젝트 에어리어 명명법
 업무에서 가장 많이 사용되는 용어를 쓰는 것이 가장 좋은 방법이다. 차선으로 서브젝트 에어리어 안에 모여 있는 엔티티타입 중 가장 중심이 되는 엔티티타입을 서브젝트 에어리어의 이름으로 사용하여도 무방하다.

### 정규화

#### 함수의 종속성
 데이터가 다른 데이터에 종속되는 현상을 의미한다. 이때 다른 데이터를 결정자라고 하고, 종속되는 값을 종속자라고 한다. 주민등록번호는 생년 월일을 결정한다. 